@{
    ViewData["Title"] = "Giriş loqları";
}

<form id="__tokenForm" method="post" style="display:none;">
    @Html.AntiForgeryToken()
</form>

<div class="container-fluid">
    <h4 class="mb-4">Giriş loqları</h4>

    <div class="card shadow-sm border-0">
        <div class="card-body position-relative" style="min-height: 400px;">
            <table id="logsTable" class="table table-hover align-middle">
                <thead>
                    <tr>
                        <th>İstifadəçi</th>
                        <th class="text-center">Nəticə</th>
                        <th>IP ünvan</th>
                        <th>Tarix</th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/logs.js"></script>
    <script>
        $(function () {
            window.dttbidsmxbb.initLogsTable({
                url: '@Url.Action("LoadAuthLogs", "Logs")',
                defaultOrder: [[3, 'desc']],
                columns: [
                    { data: 'username', className: 'fw-medium' },
                    {
                        data: 'success',
                        className: 'text-center',
                        render: function (data, type, row) {
                            if (data) return '<span class="badge bg-success">Uğurlu</span>';
                            var reason = row.failureReason ? ' title="' + row.failureReason + '"' : '';
                            return '<span class="badge bg-danger"' + reason + '>Uğursuz</span>';
                        }
                    },
                    { data: 'ipAddress', className: 'font-monospace' },
                    { data: 'timestamp', render: window.dttbidsmxbb.formatTimestamp }
                ]
            });
        });
    </script>
}
